
@defer {
  <div class="card">
    <p-table [value]="users()" stripedRows  [tableStyle]="{ 'min-width': '60em' }">
      <ng-template #caption>
        <div class="flex items-center justify-between">
          <span class="text-xl font-bold">Utenti</span>
          <p-button icon="pi pi-refresh" rounded raised (click)="doRefresh()"/>
        </div>
      </ng-template>
      <ng-template #header>
        <tr>
          <th>Nome</th>
          <th>Cognome</th>
          <th>Email</th>
          <th>Ruolo</th>
          <th>Attivo</th>
          <th>Connesso</th>
          <th>Azioni</th>
        </tr>
      </ng-template>
      <ng-template #body let-user>
        <tr>
          <td>{{ user.name }}</td>
          <td>{{ user.surname }}</td>
          <td>{{ user.email }}</td>
          <td>  @for (role of user.roles; track role.id) {
            <p-tag [value]="role.name" [severity]="getRole(role.name)" />
          }
          </td>
          <td>@if(user.enable) {
            <p-chip icon="pi pi-check" />
          } @else {
            <p-chip icon="pi pi-times" />
          }</td>

          <td>@if(user.enableInternet) {
            <p-chip icon="pi pi-check" />
          } @else {
            <p-chip icon="pi pi-times" />
          }</td>
        </tr>
      </ng-template>
      <ng-template #footer> In totale ci sono {{ users().length }} utenti. </ng-template>
    </p-table>
  </div>
} @placeholder {
  <p>In caricamento</p>
}
